import{aB as ie,aC as xe,aD as We,at as Ue,ae as Ze,af as qe,ad as we,m as M,y as H,N as j,aE as Se,M as Ce,Q as I,aF as Te,s as Ie,ai as Ke,U as N,X as Be,d as u,n as B,J as Le,K as D,aG as Re,aH as W,B as ee,q as U,A as ae,aI as Xe,aJ as oe,W as Je,S as de,aK as Qe,aL as Ye,aM as Ge,V as F,aj as et,aN as tt,R as le,aO as ot,D as nt,aP as _e,a1 as st,a4 as it,an as at,aQ as lt,x as rt,u as ct,O as dt,T as ut,aR as ft,aS as ht,f as re,v as ce,_ as gt,aT as vt,aU as be,aV as me,I as _t,a7 as bt,r as z,o as m,c as y,b as i,j as w,F as R,h as P,aa as E,w as V,a9 as ye,a2 as G,p as mt,k as yt}from"./index.10d6f7a6.js";import{h as pt}from"./head.aceb434f.js";import{u as Oe}from"./use-id.438b9888.js";import{u as kt}from"./use-refs.84b02192.js";import{S as xt}from"./index.1ddea0ef.js";function wt(e,s,c){let f=0;const t=e.scrollLeft,l=c===0?1:Math.round(c*1e3/16);function r(){e.scrollLeft+=(s-t)/l,++f<l&&ie(r)}r()}function St(e,s,c,f){let t=xe(e);const l=t<s,r=c===0?1:Math.round(c*1e3/16),v=(s-t)/r;function d(){t+=v,(l&&t>s||!l&&t<s)&&(t=s),We(e,t),l&&t<s||!l&&t>s?ie(d):f&&ie(f)}d()}function Ct(e,s){if(!Ue||!window.IntersectionObserver)return;const c=new IntersectionObserver(l=>{s(l[0].intersectionRatio>0)},{root:document.body}),f=()=>{e.value&&c.observe(e.value)},t=()=>{e.value&&c.unobserve(e.value)};Ze(t),qe(t),we(f)}const[Tt,It]=M("sticky"),Bt={zIndex:B,position:Le("top"),container:Object,offsetTop:D(0),offsetBottom:D(0)};var Lt=H({name:Tt,props:Bt,emits:["scroll","change"],setup(e,{emit:s,slots:c}){const f=j(),t=Se(f),l=Ce({fixed:!1,width:0,height:0,transform:0}),r=I(()=>Te(e.position==="top"?e.offsetTop:e.offsetBottom)),v=I(()=>{const{fixed:h,height:n,width:x}=l;if(h)return{width:`${x}px`,height:`${n}px`}}),d=I(()=>{if(!l.fixed)return;const h=Ie(Ke(e.zIndex),{width:`${l.width}px`,height:`${l.height}px`,[e.position]:`${r.value}px`});return l.transform&&(h.transform=`translate3d(0, ${l.transform}px, 0)`),h}),p=h=>s("scroll",{scrollTop:h,isFixed:l.fixed}),S=()=>{if(!f.value||Re(f))return;const{container:h,position:n}=e,x=W(f),b=xe(window);if(l.width=x.width,l.height=x.height,n==="top")if(h){const C=W(h),g=C.bottom-r.value-l.height;l.fixed=r.value>x.top&&C.bottom>0,l.transform=g<0?g:0}else l.fixed=r.value>x.top;else{const{clientHeight:C}=document.documentElement;if(h){const g=W(h),L=C-g.top-r.value-l.height;l.fixed=C-r.value<x.bottom&&C>g.top,l.transform=L<0?-L:0}else l.fixed=C-r.value<x.bottom}p(b)};return N(()=>l.fixed,h=>s("change",h)),Be("scroll",S,{target:t,passive:!0}),Ct(f,S),()=>{var h;return u("div",{ref:f,style:v.value},[u("div",{class:It({fixed:l.fixed}),style:d.value},[(h=c.default)==null?void 0:h.call(c)])])}}});const Rt=ee(Lt),[Ot,pe]=M("tab");var $t=H({name:Ot,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:B,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:U},setup(e,{slots:s}){const c=I(()=>{const t={},{type:l,color:r,disabled:v,isActive:d,activeColor:p,inactiveColor:S}=e;r&&l==="card"&&(t.borderColor=r,v||(d?t.backgroundColor=r:t.color=r));const n=d?p:S;return n&&(t.color=n),t}),f=()=>{const t=u("span",{class:pe("text",{ellipsis:!e.scrollable})},[s.title?s.title():e.title]);return e.dot||ae(e.badge)&&e.badge!==""?u(Xe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[t]}):t};return()=>u("div",{id:e.id,role:"tab",class:[pe([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:c.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[f()])}});const[Pt,ke]=M("tabs");var jt=H({name:Pt,props:{count:oe(Number),inited:Boolean,animated:Boolean,duration:oe(B),swipeable:Boolean,lazyRender:Boolean,currentIndex:oe(Number)},emits:["change"],setup(e,{emit:s,slots:c}){const f=j(),t=v=>s("change",v),l=()=>{var v;const d=(v=c.default)==null?void 0:v.call(c);return e.animated||e.swipeable?u(Qe,{ref:f,loop:!1,class:ke("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:t},{default:()=>[d]}):d},r=v=>{const d=f.value;d&&d.state.active!==v&&d.swipeTo(v,{immediate:!e.inited})};return N(()=>e.currentIndex,r),Je(()=>{r(e.currentIndex)}),de({swipeRef:f}),()=>u("div",{class:ke("content",{animated:e.animated||e.swipeable})},[l()])}});const[$e,Y]=M("tabs"),Nt={type:Le("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:D(0),duration:D(.3),animated:Boolean,ellipsis:U,swipeable:Boolean,scrollspy:Boolean,offsetTop:D(0),background:String,lazyRender:U,lineWidth:B,lineHeight:B,beforeChange:Function,swipeThreshold:D(5),titleActiveColor:String,titleInactiveColor:String},Pe=Symbol($e);var At=H({name:$e,props:Nt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:s,slots:c}){let f,t,l;const r=j(),v=j(),d=j(),p=j(),S=Oe(),h=Se(r),[n,x]=kt(),{children:b,linkChildren:C}=Ye(Pe),g=Ce({inited:!1,position:"",lineStyle:{},currentIndex:-1}),L=I(()=>b.length>e.swipeThreshold||!e.ellipsis||e.shrink),Z=I(()=>({borderColor:e.color,background:e.background})),q=(o,a)=>{var _;return(_=o.name)!=null?_:a},ue=I(()=>{const o=b[g.currentIndex];if(o)return q(o,g.currentIndex)}),te=I(()=>Te(e.offsetTop)),fe=I(()=>e.sticky?te.value+f:0),K=o=>{const a=v.value,_=n.value;if(!L.value||!a||!_||!_[g.currentIndex])return;const k=_[g.currentIndex].$el,T=k.offsetLeft-(a.offsetWidth-k.offsetWidth)/2;wt(a,T,o?0:+e.duration)},$=()=>{const o=g.inited;F(()=>{const a=n.value;if(!a||!a[g.currentIndex]||e.type!=="line"||Re(r.value))return;const _=a[g.currentIndex].$el,{lineWidth:k,lineHeight:T}=e,A=_.offsetLeft+_.offsetWidth/2,Q={width:le(k),backgroundColor:e.color,transform:`translateX(${A}px) translateX(-50%)`};if(o&&(Q.transitionDuration=`${e.duration}s`),ae(T)){const ve=le(T);Q.height=ve,Q.borderRadius=ve}g.lineStyle=Q})},je=o=>{const a=o<g.currentIndex?-1:1;for(;o>=0&&o<b.length;){if(!b[o].disabled)return o;o+=a}},X=o=>{const a=je(o);if(!ae(a))return;const _=b[a],k=q(_,a),T=g.currentIndex!==null;g.currentIndex=a,k!==e.active&&(s("update:active",k),T&&s("change",k,_.title))},J=o=>{const a=b.find((k,T)=>q(k,T)===o),_=a?b.indexOf(a):0;X(_)},he=(o=!1)=>{if(e.scrollspy){const a=b[g.currentIndex].$el;if(a&&h.value){const _=_e(a,h.value)-fe.value;t=!0,St(h.value,_,o?0:+e.duration,()=>{t=!1})}}},Ne=(o,a,_)=>{const{title:k,disabled:T}=b[a],A=q(b[a],a);T?s("disabled",A,k):(at(e.beforeChange,{args:[A],done:()=>{X(a),he()}}),s("click",A,k),lt(o)),s("click-tab",{name:A,title:k,event:_,disabled:T})},Ae=o=>{l=o.isFixed,s("scroll",o)},ze=o=>{F(()=>{J(o),he(!0)})},Fe=()=>{for(let o=0;o<b.length;o++){const{top:a}=W(b[o].$el);if(a>fe.value)return o===0?0:o-1}return b.length-1},De=()=>{if(e.scrollspy&&!t){const o=Fe();X(o)}},Me=()=>b.map((o,a)=>u($t,st({key:o.id,id:`${S}-${a}`,ref:x(a),type:e.type,color:e.color,style:o.titleStyle,class:o.titleClass,shrink:e.shrink,isActive:a===g.currentIndex,controls:o.id,scrollable:L.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:_=>Ne(o,a,_)},it(o,["dot","badge","title","disabled","showZeroBadge"])),{title:o.$slots.title})),He=()=>{if(e.type==="line"&&b.length)return u("div",{class:Y("line"),style:g.lineStyle},null)},ge=()=>{var o,a;const{type:_,border:k}=e;return u("div",{ref:d,class:[Y("wrap"),{[ot]:_==="line"&&k}]},[u("div",{ref:v,role:"tablist",class:Y("nav",[_,{shrink:e.shrink,complete:L.value}]),style:Z.value,"aria-orientation":"horizontal"},[(o=c["nav-left"])==null?void 0:o.call(c),Me(),He(),(a=c["nav-right"])==null?void 0:a.call(c)])])};N([()=>e.color,Ge],$),N(()=>e.active,o=>{o!==ue.value&&J(o)}),N(()=>b.length,()=>{g.inited&&(J(e.active),$(),F(()=>{K(!0)}))}),N(()=>g.currentIndex,()=>{K(),$(),l&&!e.scrollspy&&nt(Math.ceil(_e(r.value)-te.value))});const Ee=()=>{J(e.active),F(()=>{g.inited=!0,d.value&&(f=W(d.value).height),K(!0)})},Ve=(o,a)=>s("rendered",o,a);return de({resize:()=>{$(),F(()=>{var o,a;return(a=(o=p.value)==null?void 0:o.swipeRef.value)==null?void 0:a.resize()})},scrollTo:ze}),et($),tt($),we(Ee),Be("scroll",De,{target:h,passive:!0}),C({id:S,props:e,setLine:$,onRendered:Ve,currentName:ue,scrollIntoView:K}),()=>{var o;return u("div",{ref:r,class:Y([e.type])},[e.sticky?u(Rt,{container:r.value,offsetTop:te.value,onScroll:Ae},{default:()=>{var a;return[ge(),(a=c["nav-bottom"])==null?void 0:a.call(c)]}}):[ge(),(o=c["nav-bottom"])==null?void 0:o.call(c)],u(jt,{ref:p,count:b.length,inited:g.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:g.currentIndex,onChange:X},{default:()=>{var a;return[(a=c.default)==null?void 0:a.call(c)]}})])}}});const[zt,ne]=M("tab"),Ft=Ie({},rt,{dot:Boolean,name:B,badge:B,title:String,disabled:Boolean,titleClass:ct,titleStyle:[String,Object],showZeroBadge:U});var Dt=H({name:zt,props:Ft,setup(e,{slots:s}){const c=Oe(),f=j(!1),{parent:t,index:l}=dt(Pe);if(!t)return;const r=()=>{var p;return(p=e.name)!=null?p:l.value},v=()=>{f.value=!0,t.props.lazyRender&&F(()=>{t.onRendered(r(),e.title)})},d=I(()=>{const p=r()===t.currentName.value;return p&&!f.value&&v(),p});return N(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),ut(ft,d),()=>{var p;const S=`${t.id}-${l.value}`,{animated:h,swipeable:n,scrollspy:x,lazyRender:b}=t.props;if(!s.default&&!h)return;const C=x||d.value;if(h||n)return u(ht,{id:c,role:"tabpanel",class:ne("panel-wrapper",{inactive:!d.value}),tabindex:d.value?0:-1,"aria-hidden":!d.value,"aria-labelledby":S},{default:()=>{var Z;return[u("div",{class:ne("panel")},[(Z=s.default)==null?void 0:Z.call(s)])]}});const L=f.value||x||!b?(p=s.default)==null?void 0:p.call(s):null;return de({id:c}),re(u("div",{id:c,role:"tabpanel",class:ne("panel"),tabindex:C?0:-1,"aria-labelledby":S},[L]),[[ce,C]])}}});const Mt=ee(Dt),Ht=ee(At),[Et,se]=M("progress"),Vt={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:U,pivotColor:String,trackColor:String,strokeWidth:B,percentage:{type:B,default:0,validator:e=>e>=0&&e<=100}};var Wt=H({name:Et,props:Vt,setup(e){const s=I(()=>e.inactive?void 0:e.color),c=()=>{const{textColor:f,pivotText:t,pivotColor:l,percentage:r}=e,v=t!=null?t:`${r}%`;if(e.showPivot&&v){const d={color:f,left:`${+r}%`,transform:`translate(-${+r}%,-50%)`,background:l||s.value};return u("span",{style:d,class:se("pivot",{inactive:e.inactive})},[v])}};return()=>{const{trackColor:f,percentage:t,strokeWidth:l}=e,r={background:f,height:le(l)},v={width:`${t}%`,background:s.value};return u("div",{class:se(),style:r},[u("span",{class:se("portion",{inactive:e.inactive}),style:v},null),c()])}}});const Ut=ee(Wt);const Zt={name:"goodbookdet",data(){return{flag:1,goodObj:"",guessList:[],loading:!1,finished:!1,position:0,guessList2:[],loading2:!1,finished2:!1,position2:0,audio_listFlag:!1,expert_speak_listFlag:!1}},async mounted(){let{data:e}=await vt(this.$route.query.goodbookid);this.goodObj=e.data,this.expert_speak_listFlag=typeof this.goodObj.expert_speak_list[0]<"u",this.audio_listFlag=typeof this.goodObj.audio_list[0]<"u",this.arr=[],this.goods_type=1,this.goods_own_type=Number(e.data.goods_own_type),be(this.goods_own_type,this.position).then(s=>{this.guessList=s.data.data.list}).catch(s=>{}),me(2,this.goods_type,10).then(s=>{this.guessList2.push(...s.data.data.list)}).catch(s=>{})},watch:{"$route.query.goodbookid"(){this.$router.go(0)}},methods:{onLoad(){this.position+=10,be(this.goods_own_type,this.position).then(e=>{this.guessList.push(...e.data.data.list),this.position>20&&!e.data.data&&(this.loading=!1,this.finished=!0)}).catch(e=>{}),this.loading=!1},async onLoad2(){let{data:e}=await me(2,this.goods_type,this.position2);e.data.list&&(this.guessList2.push(...e.data.list),this.position2=e.data.list_ext.goods_position,this.goods_type=e.data.list_ext.goods_type,e.data.list_ext.goods_end==1&&(this.finished2=!0)),this.loading2=!1}},components:{Progress:Ut,headList:pt,Search:xt,Icon:_t,Tab:Mt,Tabs:Ht,List:bt}},O=e=>(mt("data-v-5ac4dff8"),e=e(),yt(),e),qt={class:"box"},Kt={class:"head_bg"},Xt={class:"head"},Jt=["src"],Qt={class:"text"},Yt=O(()=>i("span",null,"\u4F5C\u8005",-1)),Gt=O(()=>i("span",null,"\u51FA\u7248\u793E",-1)),eo=O(()=>i("p",null,[i("button",null,"\u8D2D\u4E70\u5B9E\u4F53\u7ED8\u672C")],-1)),to={class:"foster"},oo=O(()=>i("div",{class:"img"},null,-1)),no={class:"foster_right"},so={key:0,class:"intro"},io=O(()=>i("p",{class:"texttitle"},"\u7B80\u4ECB",-1)),ao=["innerHTML"],lo={key:1,class:"listen"},ro=O(()=>i("h3",null,"\u542C\u6545\u4E8B",-1)),co={class:"toker"},uo={class:"toke"},fo=["src"],ho={class:"pclass"},go={class:"button"},vo=["onClick"],_o=G("\u64AD\u653E "),bo=G("\u6682\u505C "),mo={key:2,class:"manSpeak"},yo=O(()=>i("h3",null,"\u8FBE\u4EBA\u600E\u4E48\u8BF4",-1)),po={class:"speaktext"},ko={class:"author"},xo=["src"],wo={class:"text"},So=["innerHTML"],Co={class:"comm"},To=O(()=>i("h3",null,"\u6211\u8981\u8BC4\u8BBA",-1)),Io={class:"search"},Bo={class:"guesslike"},Lo={class:"headnav"},Ro={class:"content1"},Oo=["src"],$o={class:"content2"},Po={style:{"font-size":"0.26rem"}},jo=["src"];function No(e,s,c,f,t,l){const r=z("headList"),v=z("Progress"),d=z("Icon"),p=z("Search"),S=z("router-link"),h=z("List");return m(),y("div",qt,[u(r,{title:t.goodObj.goods_name},null,8,["title"]),i("div",Kt,[i("div",Xt,[i("img",{src:t.goodObj.goods_img,alt:""},null,8,Jt),i("div",Qt,[i("p",null,w(t.goodObj.goods_name),1),i("p",null,[(m(!0),y(R,null,P(t.goodObj.label_list,n=>(m(),y("span",{key:n.id},w(n.label_name),1))),128))]),i("p",null,[Yt,i("span",null,w(t.goodObj.author),1)]),i("p",null,[Gt,i("span",null,w(t.goodObj.press_name),1)]),eo])]),i("div",to,[oo,i("div",no,[(m(!0),y(R,null,P(t.goodObj.goods_ability_list,n=>(m(),y("div",{key:n.id},[i("p",null,w(n.title),1),u(v,{"show-pivot":!1,style:{width:"2.5rem"},color:"rgb(245, 178, 54)",percentage:n.score*20},null,8,["percentage"]),i("p",null,w(n.score),1)]))),128))])])]),t.expert_speak_listFlag?E("",!0):(m(),y("div",so,[io,i("div",{class:"intro_html",ref:"intro_html",innerHTML:t.goodObj.goods_desc},null,8,ao)])),t.audio_listFlag?(m(),y("div",lo,[ro,i("div",co,[i("div",uo,[(m(!0),y(R,null,P(t.goodObj.audio_list,n=>(m(),y("div",{key:n.id,class:"text"},[i("img",{src:n.expert_info.avatar,alt:""},null,8,fo),i("div",ho,[i("p",null,w(n.video_name),1),i("p",null,[i("span",null,[u(d,{name:"clock-o"}),G(" "+w(n.time),1)]),i("span",null,[u(d,{name:"service-o"}),G(" "+w(n.play_num),1)])])]),i("div",go,[e.$store.state.state&&e.$store.state.audioref==n.video_url||e.$store.state.audioref!=n.video_url?(m(),y("button",{key:0,onClick:x=>(e.$store.state.audioref=n.video_url,e.$store.state.imgsrc=n.expert_info.avatar,e.$store.state.times=n.time,e.$store.state.boxflag=!0,e.$store.state.state=!1)},[u(d,{name:"play-circle-o",style:{"margin-right":"0.1rem"}}),_o],8,vo)):E("",!0),!e.$store.state.state&&e.$store.state.audioref==n.video_url?(m(),y("button",{key:1,onClick:s[0]||(s[0]=x=>e.$store.state.state=!0)},[u(d,{name:"pause-circle-o",style:{"margin-right":"0.1rem"}}),bo])):E("",!0)])]))),128))])])])):E("",!0),t.expert_speak_listFlag?(m(),y("div",mo,[yo,i("div",po,[i("div",ko,[(m(!0),y(R,null,P(t.goodObj.expert_speak_list,n=>(m(),y(R,{key:n.expert_id},[i("img",{src:n.avatar,alt:""},null,8,xo),i("div",wo,[i("p",null,w(n.name),1),i("p",null,w(n.user_title),1)])],64))),128))]),(m(!0),y(R,null,P(t.goodObj.expert_speak_list,n=>(m(),y("div",{key:n.expert_id,class:"content"},[i("p",null,w(n.title),1),i("p",{class:"contentfinddetstore",innerHTML:n.description},null,8,So)]))),128))])])):E("",!0),i("div",Co,[To,i("div",Io,[u(p,{shape:"round",style:{height:"0.8rem"},background:"#fff",placeholder:"\u8BF4\u4E24\u53E5\u5427~~"},{"left-icon":V(()=>[u(d,{name:"edit"})]),_:1})])]),i("div",Bo,[i("div",Lo,[i("p",{onClick:s[1]||(s[1]=n=>t.flag=!0),class:ye(t.flag==!0?"pick":"")},"\u731C\u4F60\u559C\u6B22",2),i("p",{onClick:s[2]||(s[2]=n=>t.flag=!1),class:ye(t.flag==!1?"pick":"")}," \u63A8\u8350\u4E66\u5355 ",2)]),re(i("div",Ro,[u(h,{class:"ul",loading:t.loading,"onUpdate:loading":s[3]||(s[3]=n=>t.loading=n),finished:t.finished,"finished-text":"\u4EBA\u5BB6\u4E5F\u662F\u6709\u5E95\u7EBF\u7684~~~",onLoad:l.onLoad},{default:V(()=>[(m(!0),y(R,null,P(t.guessList,n=>(m(),y("li",{key:n.goods_id},[u(S,{to:"/goodbookdet?goodbookid="+n.goods_id},{default:V(()=>[i("img",{src:n.goods_thumb,alt:""},null,8,Oo),i("p",null,w(n.goods_name),1)]),_:2},1032,["to"])]))),128))]),_:1},8,["loading","finished","onLoad"])],512),[[ce,t.flag==!0]]),re(i("div",$o,[u(h,{class:"ul2",loading:t.loading2,"onUpdate:loading":s[4]||(s[4]=n=>t.loading2=n),finished:t.finished2,"finished-text":"\u4EBA\u5BB6\u4E5F\u662F\u6709\u5E95\u7EBF\u7684~~~",onLoad:l.onLoad2},{default:V(()=>[(m(!0),y(R,null,P(t.guessList2,n=>(m(),y("li",{key:n.goods_id},[u(S,{to:"/goodbookdet?goodbookid="+n.goods_id},{default:V(()=>[i("p",Po,w(n.goods_name),1),i("img",{src:n.goods_thumb,alt:""},null,8,jo)]),_:2},1032,["to"])]))),128))]),_:1},8,["loading","finished","onLoad"])],512),[[ce,!t.flag]])])])}const Eo=gt(Zt,[["render",No],["__scopeId","data-v-5ac4dff8"]]);export{Eo as default};
